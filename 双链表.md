## 双链表

![image-20251120092803469](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120092803469.png)

- #### 双链表的初始化（带头结点）

  ```c
  typedef struct DNode
  {
      ElemType data;
      struct DNode *prior,*next;
  }DNode,*DLinkList;
  
  //初始化双链表
  bool InitDLinkList(DLinkList &L)
  {
      L = (DNode *)malloc(sizeof(DNode));  //分配一个头结点
      
      if (L == NULL)                       //内存不足，分配失败
          return false;
      
      L->prior = NULL;                     //头结点的prior永远指向NULL
      L->next = NULL;                      //头结点之后暂时还没有节点
      return true;
  }
  
  void testDLinkList()
  {
      //初始化双链表
      DLinkList L;
      InitDLinkList(L);
      //后续代码...
  }
  
  //判断双链表是否为空（带头结点）
  bool Empty(DLinkList L)
  {
      if(L->next == NULL)
          return true;
      else
          return false;
  }
  ```

  ![image-20251120093552416](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120093552416.png)

  ![image-20251120093836896](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120093836896.png)

- #### 双链表的插入

  ```c
  //在p结点之后插入s结点
  bool InsertNextDNode(DNode *p,DNode *s)
  {
      if(p == NULL || s == NULL)  //非法参数
          return false;
      s->next = p->next;    //将结点*s插入到结点*p之后
      
      if(p->next != NULL)
          p->next->prior = s;  //如果p结点有后继结点
      s->prior = p;
      p->next = s;
      return true;
  }
  ```

  ![image-20251120094142505](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120094142505.png)

  ![image-20251120094307859](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120094307859.png)

  ![image-20251120094335090](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120094335090.png)

  ![image-20251120094407625](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120094407625.png)

  ![image-20251120094643189](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120094643189.png)

  ![image-20251120094709756](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120094709756.png)

  p无后继结点时：

  ![image-20251120095219416](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120095219416.png)

  按位序前插操作可以找到前结点后在前结点执行后插操作

  ![image-20251120095447184](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120095447184.png)

- #### 双链表的删除

  ```c
  //删除p结点的后继结点
  bool DeleteNextDNode(DNode *p)
  {
      if(p == NULL)
          return false;
      DNode *q = p->next;    //找到p的后继结点q
      
      if(q == NULL)          //p没有后继
          return false;
      p->next = q->next;
      
      if(q->next != NULL)    //q结点不是最后一个结点
          q->next->prior = p;
      free(q);               //释放节点空间
      
      return true;
  }
  
  //销毁双链表
  void DestoryList(DLinkList &L)
  {
      //循环释放各个数据结点
      while(L->next != NULL)
          DeleteNextDNode(L);
      free(L);                 //释放头结点
      L = NULL;                //头指针指向NULL
  }
  ```

  要删除的结点有后继结点：

  ![image-20251120100430293](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120100430293.png)

  ![image-20251120100458077](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120100458077.png)

  ![image-20251120100527279](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120100527279.png)

  ![image-20251120100547908](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120100547908.png)

  要删除的结点无后继结点：

  ![image-20251120100625651](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120100625651.png)

  ![image-20251120100731525](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120100731525.png)

  ![image-20251120100853558](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120100853558.png)

- #### 双链表的遍历

  ```c
  //后向遍历
  while(p != NULL)
  {
      //对结点做相应处理，如打印
      p = p->next;
  }
  
  //前向遍历
  while(p != NULL)
  {
      //对结点做相应处理
      p = p->prior;
  }
  
  //前向遍历（跳过头结点）
  while(p->prior != NULL)
  {
      //对结点做相应处理
      p = p->prior;
  }
  ```

  ![image-20251120101401280](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120101401280.png)

- #### 知识总结

  ![image-20251120102118933](https://gitee.com/Ryokoi/picgo-typora/raw/master/image-20251120102118933.png)